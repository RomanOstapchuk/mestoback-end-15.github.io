# RomanOstapchuk/mestoback-end-14.github.io

## v0.0.3

v0.0.2 исправляет следующие замечания:
1) Исправлен файл readme.md.
2) Актуализирована версия проекта в package.json.
3) API не возвращает хэш пароля в методе регистрации.
4) Подключен модуль dotenv.
5) Подключен модуль cookie-parser.
6) Исключена возможность регистрации с пустым паролем.
7) Ошибка Not Found Error вынесена в отдельный файл.
8) Исправлена ошибка продолжения вызова при некорректном токене.

v0.0.3 исправляет следующие замечания:
1) Исправлена ошибка продолжения вызова при некорректном токене.

### Проект Mestoback-end создан для демонстрации работы серверной части проекта Mesto

### Разработка

npm run start запуск на 3000 порту без hot reload
npm run dev запуск на 3000 порту с hot reload

### Журнал возможностей и изменения проекта 

v0.0.1
1) В схему пользователя добавлены два поля: email и password. У каждого пользователя email уникален и валидируется на соответствие схеме электронной почты (использован модуль validator).
2) Переработан контроллер createUser - добавлены поля email и password. Пароль хешируется, данные всех полей приходят в теле запроса.
3) В файле controllers/users.js создан контроллер login, который получает из запроса почту и пароль и проверяет их. Если почта и пароль правильные, контроллер создает JWT сроком на неделю. JWT записывается в httpOnly куку.
4) В app.js созданы два обработчика POST-запросов на два роута: '/signin' и '/signup' с соответствующими контроллерами — login и createUser.
5) Создан мидлвэр для авторизации. Он верифицирует токен из заголовка.
6) Все маршруты (кроме создания нового пользователя и логина) защищены авторизацией.
7) Авторизацией защищены все маршруты, кроме создания нового пользователя и логина.
